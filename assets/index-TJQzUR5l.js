(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const R="/ksp-tech/assets/music-BcLooXZP.mp3",C={particleCount:150,weddingDate:new Date("april 20, 2026 19:00:00").getTime()};let f=!1;const M=5,I=document.getElementById("curtain"),E=document.getElementById("envelope"),B=document.getElementById("vellum"),N=document.getElementById("main-reveal"),b=document.getElementById("tap-text"),v=document.getElementById("mantra-audio"),x=document.getElementById("audio-btn"),O=document.getElementById("audio-icon"),c=document.getElementById("particle-canvas"),l=c.getContext("2d"),A=document.getElementById("rsvp-form"),w=document.getElementById("cursor-dot"),q=document.getElementById("petal-container"),P=document.getElementById("progress-bar"),L=new Audio(R);L.volume=1;const X=document.querySelectorAll(".invitation-page"),$=document.querySelectorAll(".nav-dot"),Y=document.querySelectorAll(".next-page-btn"),F=document.querySelectorAll(".prev-page-btn");function k(){H(),D(),V(),U(),_(),z(),I.addEventListener("click",Q),x&&x.addEventListener("click",K),A&&A.addEventListener("submit",j)}function z(){Y.forEach(t=>{t.onclick=()=>{const e=parseInt(t.getAttribute("data-next"));p(e)}}),F.forEach(t=>{t.onclick=()=>{const e=parseInt(t.getAttribute("data-prev"));p(e)}}),$.forEach(t=>{t.onclick=()=>{const e=parseInt(t.getAttribute("data-page"));p(e)}})}function W(){!u&&f&&(L.currentTime=0,L.play().catch(()=>{}))}function p(t){if(!(t<0||t>=M)&&(f&&W(),X.forEach((e,n)=>{e.classList.toggle("active",n===t),n===t&&(e.scrollTop=0)}),$.forEach((e,n)=>{e.classList.toggle("active",n===t)}),P)){const e=t/(M-1)*100;P.style.width=`${e}%`}}function H(){c.width=window.innerWidth,c.height=window.innerHeight,window.addEventListener("resize",()=>{c.width=window.innerWidth,c.height=window.innerHeight})}function V(){const t=setInterval(()=>{const e=new Date().getTime(),n=C.weddingDate-e;if(n<0){clearInterval(t);return}const i=Math.floor(n/(1e3*60*60*24)),o=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),s=Math.floor(n%(1e3*60*60)/(1e3*60)),a=Math.floor(n%(1e3*60)/1e3);document.getElementById("days").innerText=i.toString().padStart(2,"0"),document.getElementById("hours").innerText=o.toString().padStart(2,"0"),document.getElementById("minutes").innerText=s.toString().padStart(2,"0"),document.getElementById("seconds").innerText=a.toString().padStart(2,"0")},1e3)}function j(t){t.preventDefault();const e=t.target.querySelector('input[type="text"]').value,n=t.target.querySelector('input[type="number"]').value,i=t.target.querySelector("textarea").value,o=`*Wedding Blessing & RSVP*%0A%0AName: ${e}%0AGuests: ${n}%0AMessage: ${i}`;window.open(`https://wa.me/?text=${o}`,"_blank")}class G{constructor(){this.reset()}reset(){this.x=Math.random()*c.width,this.y=Math.random()*c.height,this.vx=(Math.random()-.5)*.5,this.vy=Math.random()*.5+.2,this.size=Math.random()*2+1,this.alpha=Math.random()*.5+.2}update(){const e=y-this.x,n=g-this.y;Math.sqrt(e*e+n*n)<150&&(this.x-=e*.02,this.y-=n*.02),this.y+=this.vy,this.alpha-=5e-4,(this.y>c.height||this.alpha<=0)&&(this.reset(),this.y=-10)}draw(){l.beginPath(),l.arc(this.x,this.y,this.size,0,Math.PI*2),l.fillStyle=`rgba(212, 175, 55, ${this.alpha})`,l.fill(),l.shadowBlur=10,l.shadowColor="#D4AF37"}}const J=Array.from({length:C.particleCount},()=>new G);let u=!1;function K(){u=!u,v&&(v.muted=u),x.classList.toggle("muted",u),O.innerText=u?"ðŸ”‡":"ðŸ”Š"}let y=0,g=0;function U(){document.addEventListener("mousemove",t=>{if(y=t.clientX,g=t.clientY,w&&(w.style.left=y+"px",w.style.top=g+"px"),Z(t),Math.random()>.7){const e=document.createElement("div");e.className="trail-particle",e.style.left=y+"px",e.style.top=g+"px",document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0.8",e.style.transform=`translate(${(Math.random()-.5)*20}px, ${(Math.random()-.5)*20}px) scale(0.5)`},0),setTimeout(()=>e.remove(),1e3)}})}function Z(t){document.querySelectorAll(".invitation-card, .frame-container").forEach(n=>{const i=n.getBoundingClientRect(),o=t.clientX-i.left,s=t.clientY-i.top,a=i.width/2,h=(i.height/2-s)/20,m=(o-a)/20;n.style.transform=`perspective(1000px) rotateX(${h}deg) rotateY(${m}deg)`})}function _(){setInterval(()=>{if(!f||!q)return;const t=document.createElement("div"),e=Math.random()>.7;t.className=`petal ${e?"jasmine":""}`;const n=Math.random()*15+10;t.style.width=n+"px",t.style.height=n+"px",t.style.left=Math.random()*100+"vw",t.style.animationDuration=Math.random()*5+5+"s",q.appendChild(t),setTimeout(()=>t.remove(),1e4)},300)}function D(){l.clearRect(0,0,c.width,c.height),J.forEach(t=>{t.update(),t.draw()}),requestAnimationFrame(D)}function Q(){f||(f=!0,I.classList.add("open"),b&&(b.style.display="none"),v&&v.play().catch(t=>console.log("Audio interaction needed",t)),setTimeout(()=>{E.classList.add("active"),setTimeout(()=>{E.classList.add("open")},1e3)},2500),setTimeout(()=>{B.classList.add("active"),N.classList.add("visible"),setTimeout(()=>{B.classList.add("fade-out"),tt(),setTimeout(()=>{I.style.display="none",E.style.display="none",B.style.display="none"},3e3)},2500)},6e3))}function tt(){const t=[document.getElementById("mantra-line-1"),document.getElementById("mantra-line-2"),document.getElementById("mantra-line-3")],e=document.getElementById("sparkle-pen"),n=document.getElementById("mantra-reveal-container");let i=0;function o(){if(i>=t.length){e.classList.remove("active"),n.classList.add("aura-active"),setTimeout(()=>{["symbol-1","symbol-2","symbol-3"].forEach((r,d)=>{setTimeout(()=>{const S=document.getElementById(r);S&&S.classList.add("show")},d*800)}),setTimeout(()=>{const r=document.getElementById("couple"),d=document.getElementById("couple-name-path");r&&(r.style.opacity="1",r.style.transition="opacity 2s ease"),d&&d.classList.add("active"),typeof p=="function"&&p(0)},3e3)},1e3);return}const s=t[i];e.classList.add("active"),s.classList.add("reveal"),s.getBoundingClientRect(),n.getBoundingClientRect();let a=null;const T=2500;function h(m){a||(a=m);const r=(m-a)/T;if(r<1){const d=r*s.scrollWidth;e.style.left=s.offsetLeft+d-10+"px",e.style.top=s.offsetTop+10+"px",requestAnimationFrame(h)}else i++,setTimeout(o,500)}requestAnimationFrame(h)}o()}k();
